---
title: Machine Learning Studio (klasszikus) kísérletek
description: Használjon Machine Learning Studio (klasszikus) modelleket a Dynamics 365 Customer Insights alkalmazásban.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669021"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="934c6-103">Azure Machine Learning Studio (klasszikus) modelleken alapuló modellek használata</span><span class="sxs-lookup"><span data-stu-id="934c6-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="934c6-104">A Dynamics 365 Customer Insights egyesített adatok a forrása a gépi tanulás modellek létrehozásának, amelyek további üzleti ismereteket hozhatnak létre.</span><span class="sxs-lookup"><span data-stu-id="934c6-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="934c6-105">A Customer Insights integrál a Machine Learning Studióval (klasszikus) a saját egyéni modelljei használatával.</span><span class="sxs-lookup"><span data-stu-id="934c6-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="934c6-106">Annak megtekintéséhez, hogy az Azure Machine Learningben kifeljesztett modellek hogyan vannak integrálva a Customer Insights szolgáltatással, tekintse meg az [Azure Machine Learning-kísérletek](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="934c6-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="934c6-107">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="934c6-107">Prerequisites</span></span>

- <span data-ttu-id="934c6-108">A Customer Insights szolgáltatás elérése</span><span class="sxs-lookup"><span data-stu-id="934c6-108">Access to Customer Insights</span></span>
- <span data-ttu-id="934c6-109">Aktív Azure Enterprise-előfizetés</span><span class="sxs-lookup"><span data-stu-id="934c6-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="934c6-110">Egyesített ügyfélprofilok</span><span class="sxs-lookup"><span data-stu-id="934c6-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="934c6-111">[Entitás exportálása az Azure Blob Storage tárhelyre](export-azure-blob-storage.md) – beállítás</span><span class="sxs-lookup"><span data-stu-id="934c6-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="934c6-112">Machine Learning Studio (klasszikus) beállítása</span><span class="sxs-lookup"><span data-stu-id="934c6-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="934c6-113">Első lépésként létre kell hoznia egy munkaterületet, és meg kell nyitnia a Machine Learning Studio (klasszikus) alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="934c6-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="934c6-114">Lépjen a [https://www.portal.azure.com](https://www.portal.azure.com/) alkalmazáshoz, és jelentkezzen be.</span><span class="sxs-lookup"><span data-stu-id="934c6-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="934c6-115">Válassza az **Erőforrás létrehozása** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="934c6-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="934c6-116">Keresse meg a **Machine Learning Studio munkaterületet**, és válassza a **Létrehozás** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="934c6-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="934c6-117">Adja meg a [munkaterület létrehozásához](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace) szükséges adatokat.</span><span class="sxs-lookup"><span data-stu-id="934c6-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="934c6-118">Válassza ki a **Webszolgáltatási csomag tarifacsomag** az importálni kívánt adatok mennyiségétől függően.</span><span class="sxs-lookup"><span data-stu-id="934c6-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="934c6-119">A legjobb teljesítmény érdekében válassza ki a földrajzilag legközelebb eső **Helyet**.</span><span class="sxs-lookup"><span data-stu-id="934c6-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="934c6-120">Az erőforrás létrehozása után megjelenik a Machine Learning Studio munkaterület irányítópultja.</span><span class="sxs-lookup"><span data-stu-id="934c6-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="934c6-121">Válassza a **Machine Learning Studio indítása** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="934c6-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Az Azure Machine Learning Studio felhasználói felülete](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="934c6-123">Az Azure Machine Learning Studio használata</span><span class="sxs-lookup"><span data-stu-id="934c6-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="934c6-124">Ezután létrehozhat egy új kísérletet, vagy importálhat egy meglévő kísérlet sablont a mintakatalógusból.</span><span class="sxs-lookup"><span data-stu-id="934c6-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="934c6-125">Három szabványos esetre vonatkozóan vannak mintakísérletek:</span><span class="sxs-lookup"><span data-stu-id="934c6-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="934c6-126">Ügyfél-lemorzsolódás előrejelzése</span><span class="sxs-lookup"><span data-stu-id="934c6-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="934c6-127">Ügyfélélettartam értéke</span><span class="sxs-lookup"><span data-stu-id="934c6-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="934c6-128">Termék ajánlása vagy a következő legjobb művelet</span><span class="sxs-lookup"><span data-stu-id="934c6-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="934c6-129">Ha új kísérletet hoz létre, vagy a katalógusból használ kísérleti sablont használ, akkor be kell állítania az **Adatimportálás** tulajdonságait.</span><span class="sxs-lookup"><span data-stu-id="934c6-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="934c6-130">Használja az interaktív élményt, vagy közvetlenül adja meg az adatokat tartalmazó Azure Blob Storage eléréséhez használható adatokat.</span><span class="sxs-lookup"><span data-stu-id="934c6-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning Studio kísérlet](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="934c6-132">Most már létrehozhat egy egyéni feldolgozási folyamatot az adatok tisztításához és előfeldolgozásához, a funkciók kinyeréséhez és egy megfelelő modell betanításához.</span><span class="sxs-lookup"><span data-stu-id="934c6-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="934c6-133">Tesztelje és optimalizálja a modell teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="934c6-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="934c6-134">Ha elégedett a modell minőségével, válassza a **Webszolgáltatás beállítása** > **Prediktív webszolgáltatás** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="934c6-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="934c6-135">Ezzel a lehetőséggel a betanított modellt és a jellemzőkre bontó csővezetéket importálja a tanítási kísérletből a prediktív kiszolgálásba.</span><span class="sxs-lookup"><span data-stu-id="934c6-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="934c6-136">A prediktív szolgáltatás egy másik bemeneti adatkészletet is fogadhat a tanítási kísérletben használt sémával előrejelzések készítéséhez.</span><span class="sxs-lookup"><span data-stu-id="934c6-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Prediktív webszolgáltatás beállítása](media/predictive-webservice-control.png)

1. <span data-ttu-id="934c6-138">Ha a prediktív webszolgáltatási kísérlet sikeres, akkor az automatikus ütemezéshez üzembe helyezheti azt.</span><span class="sxs-lookup"><span data-stu-id="934c6-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="934c6-139">Ha azt szeretné, hogy a webszolgáltatás működjön együtt a Customer Insights alkalmazással, válassza **Webszolgáltatás központi telepítése** > **Webszolgáltatás [új] előzetes verzió központi telepítése** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="934c6-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="934c6-140">[További információk webszolgáltatás telepítéséről](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="934c6-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Prediktív webszolgáltatás telepítése](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="934c6-142">Mintamodellek a galériából</span><span class="sxs-lookup"><span data-stu-id="934c6-142">Sample models from the gallery</span></span>

<span data-ttu-id="934c6-143">A Contoso Hotel kitalált forgatókönyvét fogjuk használni jelen cikk modelljeihez.</span><span class="sxs-lookup"><span data-stu-id="934c6-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="934c6-144">A Contoso Hotel a következő adatokat gyűjti össze:</span><span class="sxs-lookup"><span data-stu-id="934c6-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="934c6-145">A hotelben tartózkodás tevékenységből álló CRM-adatok.</span><span class="sxs-lookup"><span data-stu-id="934c6-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="934c6-146">A adatkészlet információkat tartalmaz az egyes regisztrált ügyfelek tartózkodásának dátumairól.</span><span class="sxs-lookup"><span data-stu-id="934c6-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="934c6-147">Tartalmaz továbbá információkat a helyfoglalásokról, a szobatípusokről, a tartózkodás részleteiről stb.</span><span class="sxs-lookup"><span data-stu-id="934c6-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="934c6-148">Az adatok négy évet ölelnek fel, 2014. január és 2018. január között.</span><span class="sxs-lookup"><span data-stu-id="934c6-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="934c6-149">A szálloda vendégeinek ügyfélprofiljai.</span><span class="sxs-lookup"><span data-stu-id="934c6-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="934c6-150">Ezek a profilok az egyes ügyfelekre vonatkozó információkat tartalmaznak, beleértve a nevüket, a születési nevet, a lakcímet, a nemet és a telefonszámot.</span><span class="sxs-lookup"><span data-stu-id="934c6-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="934c6-151">A szálloda szolgáltatásainak használata, többek között a fürdő, a mosoda, a Wi-Fi vagy a futár.</span><span class="sxs-lookup"><span data-stu-id="934c6-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="934c6-152">Ez az információ minden regisztrált ügyfélhez naplózva van.</span><span class="sxs-lookup"><span data-stu-id="934c6-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="934c6-153">Általában a szolgáltatások használata a tartózkodáshoz van kapcsolva.</span><span class="sxs-lookup"><span data-stu-id="934c6-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="934c6-154">Bizonyos esetekben a szolgáltatásokat az ügyfelek használhatják anélkül, hogy a szállodában tartózkodnának.</span><span class="sxs-lookup"><span data-stu-id="934c6-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="934c6-155">Lemorzsolódási analízis</span><span class="sxs-lookup"><span data-stu-id="934c6-155">Churn Analysis</span></span>

<span data-ttu-id="934c6-156">A lemorzsolódás elemzése a különböző üzleti területekre vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="934c6-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="934c6-157">Ebben a példában a szolgáltatáshoz kapcsolódó lemorzsolódást tekintjük meg, amely kifejezetten a fent ismertetett szállodai szolgáltatások kontextusában.</span><span class="sxs-lookup"><span data-stu-id="934c6-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="934c6-158">Ez egy működő példája egy teljes körű modell folyamatnak, amely kiindulási pontként használható bármely más típusú lemorzsolódási modellhez.</span><span class="sxs-lookup"><span data-stu-id="934c6-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="934c6-159">A lemorzsolódás meghatározása</span><span class="sxs-lookup"><span data-stu-id="934c6-159">Definition of Churn</span></span>

<span data-ttu-id="934c6-160">A lemorzsolódás meghatározása az esettől függően változhat.</span><span class="sxs-lookup"><span data-stu-id="934c6-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="934c6-161">Ebben a példában egy olyan vendégnek, aki az elmúlt évben nem járt a szállodában lemorzsolódónak kell lennie.</span><span class="sxs-lookup"><span data-stu-id="934c6-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="934c6-162">A kísérlet sablont importálhatja a katalógusból.</span><span class="sxs-lookup"><span data-stu-id="934c6-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="934c6-163">Első lépésként ügyeljen arra, hogy az Azure Blob Storage szolgáltatásból importálja a **Hotelben tartózkodás tevékenységeit**, az **Ügyféladatokat** és a **Szolgáltatáshasználat adatait** az Azure Blob Storage tárhelyről.</span><span class="sxs-lookup"><span data-stu-id="934c6-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Adatok importálása a lemorzsolódási modellhez](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="934c6-165">Jellegzetességek megadása</span><span class="sxs-lookup"><span data-stu-id="934c6-165">Featurization</span></span>

<span data-ttu-id="934c6-166">A lemorzsolódás meghatározása alapján először azonosítani kell a címkét befolyásoló nyers funkciókat.</span><span class="sxs-lookup"><span data-stu-id="934c6-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="934c6-167">Ezt követően ezeket a nyers funkciókat a gépi tanulás modellekkel használható numerikus függvényekké dolgozzuk fel.</span><span class="sxs-lookup"><span data-stu-id="934c6-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="934c6-168">A Customer Insightsban adatintegráció történik, így összekapcsolhatja ezeket a táblákat az *Ügyfélazonosító* segítségével.</span><span class="sxs-lookup"><span data-stu-id="934c6-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Importált adatok egyesítése](media/join-imported-data.png)

<span data-ttu-id="934c6-170">A modell kiépítésének jellemzőkre bontása a lemorzsolódás elemzéséhez kicsit trükkös lehet.</span><span class="sxs-lookup"><span data-stu-id="934c6-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="934c6-171">Ez az adat egy időfüggvény új szállodai tevékenységgel, amelyet napi rendszerességgel rögzítettek.</span><span class="sxs-lookup"><span data-stu-id="934c6-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="934c6-172">A jellemzőkre bontás során statikus funkciókat szeretnénk létrehozni a dinamikus adatokból.</span><span class="sxs-lookup"><span data-stu-id="934c6-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="934c6-173">Ebben az esetben a szállodai tevékenységből több jellemzőt is létrehozunk egy év csúszó ablakával.</span><span class="sxs-lookup"><span data-stu-id="934c6-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="934c6-174">Kiterjesztjük a kategorikus jellemzőket is, mint a szoba típusa vagy a foglalás típusa különálló jellemzőkké one-hot kódolással.</span><span class="sxs-lookup"><span data-stu-id="934c6-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="934c6-175">A jellemzők végső listája:</span><span class="sxs-lookup"><span data-stu-id="934c6-175">Final list of features:</span></span>

| <span data-ttu-id="934c6-176">**Szám**</span><span class="sxs-lookup"><span data-stu-id="934c6-176">**Number**</span></span>  | <span data-ttu-id="934c6-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="934c6-177">**Original_Column**</span></span>          | <span data-ttu-id="934c6-178">**Származtatott jellemzők**</span><span class="sxs-lookup"><span data-stu-id="934c6-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="934c6-179">1</span><span class="sxs-lookup"><span data-stu-id="934c6-179">1</span></span>           | <span data-ttu-id="934c6-180">Szoba típusa</span><span class="sxs-lookup"><span data-stu-id="934c6-180">Room Type</span></span>                    | <span data-ttu-id="934c6-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="934c6-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="934c6-182">2</span><span class="sxs-lookup"><span data-stu-id="934c6-182">2</span></span>           | <span data-ttu-id="934c6-183">Foglalás típusa</span><span class="sxs-lookup"><span data-stu-id="934c6-183">Booking Type</span></span>                 | <span data-ttu-id="934c6-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="934c6-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="934c6-185">3</span><span class="sxs-lookup"><span data-stu-id="934c6-185">3</span></span>           | <span data-ttu-id="934c6-186">Utazási kategória</span><span class="sxs-lookup"><span data-stu-id="934c6-186">Travel Category</span></span>              | <span data-ttu-id="934c6-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="934c6-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="934c6-188">4</span><span class="sxs-lookup"><span data-stu-id="934c6-188">4</span></span>           | <span data-ttu-id="934c6-189">Elköltött pénz</span><span class="sxs-lookup"><span data-stu-id="934c6-189">Dollars Spent</span></span>                | <span data-ttu-id="934c6-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="934c6-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="934c6-191">5</span><span class="sxs-lookup"><span data-stu-id="934c6-191">5</span></span>           | <span data-ttu-id="934c6-192">Bejelentkezés és kijelentkezés dátuma</span><span class="sxs-lookup"><span data-stu-id="934c6-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="934c6-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="934c6-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="934c6-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="934c6-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="934c6-195">6</span><span class="sxs-lookup"><span data-stu-id="934c6-195">6</span></span>           | <span data-ttu-id="934c6-196">Szolgáltatáshasználat</span><span class="sxs-lookup"><span data-stu-id="934c6-196">Service Usage</span></span>                | <span data-ttu-id="934c6-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="934c6-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="934c6-198">Modellválasztás</span><span class="sxs-lookup"><span data-stu-id="934c6-198">Model selection</span></span>

<span data-ttu-id="934c6-199">Most ki kell választani a használandó optimális algoritmust.</span><span class="sxs-lookup"><span data-stu-id="934c6-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="934c6-200">Ebben az esetben a legtöbb jellemző a kategorikus jellemzőkön alapul.</span><span class="sxs-lookup"><span data-stu-id="934c6-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="934c6-201">A döntési fa alapú modelek általában jól működnek.</span><span class="sxs-lookup"><span data-stu-id="934c6-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="934c6-202">Ha csak numerikus jellemzők vannak, a neurális hálózatok jobb választást jelenthetnek.</span><span class="sxs-lookup"><span data-stu-id="934c6-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="934c6-203">A Support Vector Machine (SVM) is jó jelölt az ilyen helyzetekben; ugyanakkor jelenetős mennyiségű finomhangolás szükséges a legjobb teljesítményhez.</span><span class="sxs-lookup"><span data-stu-id="934c6-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="934c6-204">Úgy döntünk, hogy **Kétosztályos erősített döntési fát** használunk első modellként, amit a **kétszintű SVM** követ második modellként.</span><span class="sxs-lookup"><span data-stu-id="934c6-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="934c6-205">Az Azure Machine Learning Studio lehetővé teszi, hogy A/B tesztelést végezzen, ezért érdemes egy helyett két modellel kezdeni a kezdést.</span><span class="sxs-lookup"><span data-stu-id="934c6-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="934c6-206">A következő kép bemutatja a modell tanítási és értékelési folyamatát az Azure Machine Learning Studio alkalmazásból:</span><span class="sxs-lookup"><span data-stu-id="934c6-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Az Azure Machine Learning Studio lemorzsolódási modellje](media/azure-machine-learning-model.png)

<span data-ttu-id="934c6-208">Mi is alkalmazzuk a **Permutációs tulajdonság fontossága** technikát, ami fontos szempontja a modell optimalizálása.</span><span class="sxs-lookup"><span data-stu-id="934c6-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="934c6-209">A beépített modellek nem tudnak betekintést kapni a végső előrejelzés adott jellemzőire gyakorolt hatásra.</span><span class="sxs-lookup"><span data-stu-id="934c6-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="934c6-210">A jellemzők fontossága a kalkulátor egyéni algoritmus segítségével számítja ki az egyes jellemzők hatását egy adott modell kimenetelére.</span><span class="sxs-lookup"><span data-stu-id="934c6-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="934c6-211">A jellemző fontossága a +1 és -1 közötti normalizált.</span><span class="sxs-lookup"><span data-stu-id="934c6-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="934c6-212">A negatív hatás azt jelenti, hogy a kapcsolódó jellemző nem intuitív módon befolyásolja az eredményt, és el kell távolítani a modellből.</span><span class="sxs-lookup"><span data-stu-id="934c6-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="934c6-213">A pozitív hatás azt jelzi, hogy a funkció nagy mértékben hozzájárul a előrejelzéshez.</span><span class="sxs-lookup"><span data-stu-id="934c6-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="934c6-214">Ezek az értékek nem korrelációs együtthatók, mivel ezek eltérő mérőszámok.</span><span class="sxs-lookup"><span data-stu-id="934c6-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="934c6-215">További információkért lásd:[Permutációs tulajdonság fontossága](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="934c6-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="934c6-216">A teljes [lemorzsolódási kísérlet az Azure AI Gallery-ben érhető el](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="934c6-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="934c6-217">Ügyfélélettartam érték előrejelzése</span><span class="sxs-lookup"><span data-stu-id="934c6-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="934c6-218">Az ügyfélélettartam-érték (CLTV) kiszámítása az egyik olyan kulcsfontosságú mérőszám, amelyet egy vállalat az ügyfelek értékelése és szegmentálása céljából használhat.</span><span class="sxs-lookup"><span data-stu-id="934c6-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="934c6-219">A szállodai üzlet szempontjából fontos, hogy megismerjék ügyfeleiket.</span><span class="sxs-lookup"><span data-stu-id="934c6-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="934c6-220">A jó ügyfeleket alkotó tényezők megértése például alapvető fontosságú információ.</span><span class="sxs-lookup"><span data-stu-id="934c6-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="934c6-221">Ez segíti a szállodai menedzsmentet, hogy milyen szolgáltatásokra kell összpontosítaniuk, és, hogyan tehetik elégedetté jól fizető ügyfeleiket.</span><span class="sxs-lookup"><span data-stu-id="934c6-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="934c6-222">Ezek a döntések közvetlen hatással lehetnek az értékesítésre és a bevételekre.</span><span class="sxs-lookup"><span data-stu-id="934c6-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="934c6-223">A CLTV definíciója</span><span class="sxs-lookup"><span data-stu-id="934c6-223">Definition of CLTV</span></span>

<span data-ttu-id="934c6-224">Ebben a példában egy ügyfél CLTV-jét abban az összegben határozzuk meg amelyet az ügyfél várhatóan a következő 365 napban el fog költeni.</span><span class="sxs-lookup"><span data-stu-id="934c6-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="934c6-225">Az elmúlt három év adatait használjuk az összes ügyfél számára, hogy megjósoljuk ezt az értéket.</span><span class="sxs-lookup"><span data-stu-id="934c6-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="934c6-226">Jellegzetességek megadása</span><span class="sxs-lookup"><span data-stu-id="934c6-226">Featurization</span></span>

<span data-ttu-id="934c6-227">Ebben az esetben a jellemzőkre bontás nagyon hasonlít a lemorzsolódásnál látottakra.</span><span class="sxs-lookup"><span data-stu-id="934c6-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="934c6-228">A címkék és a várható értékek azonban eltérnek a fenti meghatározástól.</span><span class="sxs-lookup"><span data-stu-id="934c6-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="934c6-229">Modellválasztás</span><span class="sxs-lookup"><span data-stu-id="934c6-229">Model selection</span></span>

<span data-ttu-id="934c6-230">A CLTV előrejelzése egy regressziós probléma, mivel a becsült érték egy pozitív, folytonos változó.</span><span class="sxs-lookup"><span data-stu-id="934c6-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="934c6-231">A szolgáltatás tulajdonságai alapján az egyik algoritmus a **Súlyozott döntésifa-regresszió**, a másik a **Neurális hálózati regresszió**, amit használunk a modell tanításához.</span><span class="sxs-lookup"><span data-stu-id="934c6-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="934c6-232">Termék ajánlása vagy a Következő legjobb művelet</span><span class="sxs-lookup"><span data-stu-id="934c6-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="934c6-233">A termékajánlást szállodai környezetben úgy értelmezzük, hogy a hitel ügyfeleinek kínált szolgáltatásokat ajánlják.</span><span class="sxs-lookup"><span data-stu-id="934c6-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="934c6-234">A cél a megfelelő szolgáltatások kiválasztása az ügyfelek számára, hogy a használatuk maximáli szintű legyen.</span><span class="sxs-lookup"><span data-stu-id="934c6-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="934c6-235">Hasonló a videó streaming szolgáltatás felhasználóinál alkalmazott videókra vonatkozó ajánlásokhoz.</span><span class="sxs-lookup"><span data-stu-id="934c6-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="934c6-236">Termék ajánlása vagy a Következő legjobb művelet definiálása</span><span class="sxs-lookup"><span data-stu-id="934c6-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="934c6-237">A célt úgy határozjuk meg, hogy a lehető legnagyobb értékű szolgáltatáshasználatot érjük el, úgy, hogy a számukra leginkább megfelelő szolgáltatásokat nyújtjuk a szállodai ügyfeleknek az érdeklődésük alapján.</span><span class="sxs-lookup"><span data-stu-id="934c6-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="934c6-238">Jellegzetességek megadása</span><span class="sxs-lookup"><span data-stu-id="934c6-238">Featurization</span></span>

<span data-ttu-id="934c6-239">A lemorzsolódás modelljéhez hasonlóan egyestíjük a szálloda ServiceCustomerID és CustomerID entitásait, hogy konzisztens módon hozzunk létre ajánlásokat CustomerID alapján.</span><span class="sxs-lookup"><span data-stu-id="934c6-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Az ajánlási modell jellemzőkre bontása](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="934c6-241">Az adatok három különböző entitásból származnak és a jellemzők ezekből vannak származtatva.</span><span class="sxs-lookup"><span data-stu-id="934c6-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="934c6-242">Az ajánlás problematikájához kapcsolódó jellemzőkre bontás más mint az lemorzsolódási és CLTV forgatókönyvek esetében.</span><span class="sxs-lookup"><span data-stu-id="934c6-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="934c6-243">Az ajánlási modellnek három jellemzőcsoport formájában van szüksége bemeneti adatokra.</span><span class="sxs-lookup"><span data-stu-id="934c6-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="934c6-244">Modellválasztás</span><span class="sxs-lookup"><span data-stu-id="934c6-244">Model selection</span></span>

<span data-ttu-id="934c6-245">A termékeket vagy szolgáltatásokat a **Matchbox-ajánló betanítása** algoritmusával jósoljuk meg az ajánlási modell betanításához.</span><span class="sxs-lookup"><span data-stu-id="934c6-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Termékjavaslat-algoritmus](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="934c6-247">A **Matchbox-ajánló betanítása** három bemenete a betanítási szolgáltatás használati adatait, az ügyfél leírását (nem kötelező) és a szolgáltatás leírását kéri be.</span><span class="sxs-lookup"><span data-stu-id="934c6-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="934c6-248">A modelleket három különböző módon lehet pontozni.</span><span class="sxs-lookup"><span data-stu-id="934c6-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="934c6-249">Az egyik a modell értékelése, ahol a Normalizált diszkontált kumulatív nyereséget (NDCG) pontszám lesz kiszámítva az értékelt elemek rangsorolásához.</span><span class="sxs-lookup"><span data-stu-id="934c6-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="934c6-250">Ebben a kísérletben az NDCG pontszáma 0,97.</span><span class="sxs-lookup"><span data-stu-id="934c6-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="934c6-251">A másik két lehetőség a modell pontozása a teljes ajánlott szolgáltatáskatalóguson, vagy csak olyan elemek pontozása, amelyeket a felhasználók korábban még nem használtak.</span><span class="sxs-lookup"><span data-stu-id="934c6-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="934c6-252">A teljes szolgáltatási katalógusra vonatkozó ajánlások eloszlása alapján megfigyelhető, hogy a telefon, a Wi-Fi és a futár a legfelső szintű szolgáltatás, amelyet érdemes ajánlani.</span><span class="sxs-lookup"><span data-stu-id="934c6-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="934c6-253">Ez összhangban áll azzal, amit találtunk a szolgáltatásifogyasztási-adatok eloszlásakor:</span><span class="sxs-lookup"><span data-stu-id="934c6-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Javaslati modell kimenete](media/azure-machine-learning-model-output.png)

<span data-ttu-id="934c6-255">A teljes [termékajánlási kísérlet elérhető az Azure AI Gallery-ben.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="934c6-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="934c6-256">Egyéni modellek integrálása</span><span class="sxs-lookup"><span data-stu-id="934c6-256">Integrate custom models</span></span>

<span data-ttu-id="934c6-257">Ahhoz, hogy ezeket az előrejelzéseket használni lehessen a Customer Insights alkalmazásban, az ügyfelek azonosítói mellett **exportálnia** kell az előrejelzéseket is.</span><span class="sxs-lookup"><span data-stu-id="934c6-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="934c6-258">[Exportálja őket ugyanabba az Azure Blob Storage helyre](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), ahova a forrásadatokat exportálta.</span><span class="sxs-lookup"><span data-stu-id="934c6-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="934c6-259">A prediktív webszolgáltatás rendszeresen futtatható, és a pontszámokat frissítheti.</span><span class="sxs-lookup"><span data-stu-id="934c6-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="934c6-260">Az egyéni modell által létrehozott adatok segítségével tovább bővítheti az ügyféladatokat.</span><span class="sxs-lookup"><span data-stu-id="934c6-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="934c6-261">További tudnivalókat az [Egyéni gépi tanulás modellek](custom-models.md) című rész tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="934c6-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
